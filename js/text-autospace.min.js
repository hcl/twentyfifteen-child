!function(window,$){init=function(){$("body").each(function(){var hanzi="[\u2E80-\u2FFF\u31C0-\u31EF\u3300-\u4DBF\u4E00-\u9FFF\uF900-\uFAFF\uFE30-\uFE4F]",punc={base:"[@&=_\\$%\\^\\*-\\+/]",open:"[\\(\\[\\{<‘“]",close:"[,\\.\\?!:\\)\\]\\}>’”]"},latin="[A-Za-z0-9\u00C0-\u00FF\u0100-\u017F\u0180-\u024F\u1E00-\u1EFF]|"+punc.base,patterns=["/("+hanzi+")("+latin+"|"+punc.open+")/ig","/("+latin+"|"+punc.close+")("+hanzi+")/ig"];patterns.forEach(function(exp){findAndReplaceDOMText(this,{find:eval(exp),replace:"$1<hanla>$2"})},this),findAndReplaceDOMText(this,{find:"<hanla>",replace:function(){return document.createElement("hanla")}}),this.normalize(),$("* > hanla:first-child").parent().each(function(){1==this.firstChild.nodeType&&($(this).before($("<hanla/>")),$(this).find("hanla:first-child").remove())})})},findAndReplaceDOMText=function(e,t){return(t=t).filterElements=function(e){var t=e.nodeName.toLowerCase(),e=1==e.nodeType?e.getAttribute("class"):"",e=!(!e||null==e.match(/han-js-charized/));return"style"!==t&&"script"!==t&&!e},window.findAndReplaceDOMText(e,t)},$(document).ready(function(){init()})}(window,window.jQuery,void 0),function(e){window.findAndReplaceDOMText=e()}(function(){var i="retain",o="first",g=document,a={}.hasOwnProperty;function d(){return function(e,t,n,r,i){if(t&&!t.nodeType&&arguments.length<=2)return!1;var o="function"==typeof n;o&&(n=function(n){return function(e,t){return n(e.text,t.startIndex)}}(n));var a=s(t,{find:e,wrap:o?null:n,replace:o?n:"$"+(r||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n;return 0<r&&(n=e[r],e.index+=e[0].indexOf(n),e[0]=n),e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:i});return d.revert=function(){return a.revert()},!0}.apply(null,arguments)||s.apply(null,arguments)}function s(e,t){return new n(e,t)}function n(e,t){var n=t.preset&&d.PRESETS[t.preset];if(t.portionMode=t.portionMode||i,n)for(var r in n)a.call(n,r)&&!a.call(t,r)&&(t[r]=n[r]);this.node=e,this.options=t,this.prepMatch=t.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return d.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},d.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},d.PRESETS={prose:{forceContext:d.NON_INLINE_PROSE=function(e){return a.call(d.NON_CONTIGUOUS_PROSE_ELEMENTS,e.nodeName.toLowerCase())},filterElements:function(e){return!a.call(d.NON_PROSE_ELEMENTS,e.nodeName.toLowerCase())}}},(d.Finder=n).prototype={search:function(){var o,a=0,d=0,s=this.options.find,e=this.getAggregateText(),p=[],c=this;return s="string"==typeof s?RegExp(String(s).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"):s,function e(t){for(var n=0,r=t.length;n<r;++n){var i=t[n];if("string"==typeof i){if(s.global)for(;o=s.exec(i);)p.push(c.prepMatch(o,a++,d));else(o=i.match(s))&&p.push(c.prepMatch(o,0,d));d+=i.length}else e(i)}}(e),p},prepMatch:function(e,t,n){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=n+e.index+e[0].length,e.startIndex=n+e.index,e.index=t,e},getAggregateText:function(){var o=this.options.filterElements,a=this.options.forceContext;return function e(t){if(t.nodeType===Node.TEXT_NODE)return[t.data];if(o&&!o(t))return[];var n=[""];var r=0;if(t=t.firstChild)do{var i;t.nodeType!==Node.TEXT_NODE?(i=e(t),a&&t.nodeType===Node.ELEMENT_NODE&&(!0===a||a(t))?(n[++r]=i,n[++r]=""):("string"==typeof i[0]&&(n[r]+=i.shift()),i.length&&(n[++r]=i,n[++r]=""))):n[r]+=t.data}while(t=t.nextSibling);return n}(this.node)},processMatches:function(){var e,t,n,r=this.matches,i=this.node,o=this.options.filterElements,a=[],d=i,s=r.shift(),p=0,c=0,h=[i];e:for(;;){if(d.nodeType===Node.TEXT_NODE&&(!t&&d.length+p>=s.endIndex?t={node:d,index:c++,text:d.data.substring(s.startIndex-p,s.endIndex-p),indexInMatch:0===p?0:p-s.startIndex,indexInNode:s.startIndex-p,endIndexInNode:s.endIndex-p,isEnd:!0}:e&&a.push({node:d,index:c++,text:d.data,indexInMatch:p-s.startIndex,indexInNode:0}),!e&&d.length+p>s.startIndex&&(e={node:d,index:c++,indexInMatch:0,indexInNode:s.startIndex-p,endIndexInNode:s.endIndex-p,text:d.data.substring(s.startIndex-p,s.endIndex-p)}),p+=d.data.length),n=d.nodeType===Node.ELEMENT_NODE&&o&&!o(d),e&&t){if(d=this.replaceMatch(s,e,a,t),p-=t.node.data.length-t.endIndexInNode,t=e=null,a=[],c=0,!(s=r.shift()))break}else if(!n&&(d.firstChild||d.nextSibling)){d=d.firstChild?(h.push(d),d.firstChild):d.nextSibling;continue}for(;;){if(d.nextSibling){d=d.nextSibling;break}if((d=h.pop())===i)break e}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,t,r){var n=this.options.portionMode;return n===o&&0<t.indexInMatch?"":(e=e.replace(/\$(\d+|&|`|')/g,function(e,t){var n;switch(t){case"&":n=r[0];break;case"`":n=r.input.substring(0,r.startIndex);break;case"'":n=r.input.substring(r.endIndex);break;default:n=r[+t]||""}return n}),n===o?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,t){var n,r=this.options.replace||"$&",i=this.options.wrap,o=this.options.wrapClass;if(i&&i.nodeType&&((n=g.createElement("div")).innerHTML=i.outerHTML||(new XMLSerializer).serializeToString(i),i=n.firstChild),"function"==typeof r)return(r=r(e,t))&&r.nodeType?r:g.createTextNode(String(r));i="string"==typeof i?g.createElement(i):i;return i&&o&&(i.className=o),(r=g.createTextNode(this.prepareReplacementString(r,e,t))).data&&i?(i.appendChild(r),i):r},replaceMatch:function(e,t,n,r){var i=t.node,o=r.node;if(i===o){var a=i;0<t.indexInNode&&(s=g.createTextNode(a.data.substring(0,t.indexInNode)),a.parentNode.insertBefore(s,a));var d=this.getPortionReplacementNode(r,e);return a.parentNode.insertBefore(d,a),r.endIndexInNode<a.length&&(p=g.createTextNode(a.data.substring(r.endIndexInNode)),a.parentNode.insertBefore(p,a)),a.parentNode.removeChild(a),this.reverts.push(function(){s===d.previousSibling&&s.parentNode.removeChild(s),p===d.nextSibling&&p.parentNode.removeChild(p),d.parentNode.replaceChild(a,d)}),d}for(var s=g.createTextNode(i.data.substring(0,t.indexInNode)),p=g.createTextNode(o.data.substring(r.endIndexInNode)),c=this.getPortionReplacementNode(t,e),h=[],l=0,u=n.length;l<u;++l){var f=n[l],x=this.getPortionReplacementNode(f,e);f.node.parentNode.replaceChild(x,f.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(f,x)),h.push(x)}var N=this.getPortionReplacementNode(r,e);return i.parentNode.insertBefore(s,i),i.parentNode.insertBefore(c,i),i.parentNode.removeChild(i),o.parentNode.insertBefore(N,o),o.parentNode.insertBefore(p,o),o.parentNode.removeChild(o),this.reverts.push(function(){s.parentNode.removeChild(s),c.parentNode.replaceChild(i,c),p.parentNode.removeChild(p),N.parentNode.replaceChild(o,N)}),N}},d});